<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ForYouPage</title>
</head>
<body>
<app-navbar></app-navbar>
<h1 style="padding-top: 30px"> Bookings <i
  class="fa-solid fa-book-bookmark"></i></h1>
<br>

<div class="card">
  <div class="card-body">
    <h5 class="card-title" style="padding-bottom: 30px">Booking Planner</h5>

    <section class="booking" style="justify-content: center">
            <!-- Booking Table-->
      <div class="financeTable" style="padding-left: 80px">
        <table>
          <tr>
            <th>Date <i class="fa-solid fa-calendar-day"></i></th>
            <th>Booking Value <i class="fa-solid fa-circle-dollar"></i></th>
            <th>Budget <i class="fa-solid fa-book-bookmark"></i></th>
            <th>Project <i class="fa-solid fa-diagram-project"></i></th>
            <th>Bank Account <i class="fa-solid fa-vault"></i></th>
            <th>Buttons <i class="fa-solid fa-play-pause"></i></th>

          </tr>

          <tr *ngFor="let booking of booking">
            <td>


              <div *ngIf="!this.hidden[booking.id]">{{booking.date|date:"dd.MM.yy"}}</div>
              <input *ngIf="this.hidden[booking.id]" type="datetime-local" [(ngModel)]="updDate"
                     style="width: 250px;">
            </td>
            <td>


              <div *ngIf="!this.hidden[booking.id]">{{booking.value}} â‚¬</div>

              <input *ngIf="this.hidden[booking.id]" type="number" min="0" [(ngModel)]="updValue" placeholder="Value"
                     style="width: 250px;">
            </td>
            <td>


              <div *ngIf="!this.hidden[booking.id]"> {{getProjectName(booking.assignedProjectId)}}


              </div>
              <select *ngIf="this.hidden[booking.id]" [(ngModel)]="booking.assignedBudgetId" style="width: 150px">
                <option *ngFor="let budget of budgets"
                        [value]="budget.id">{{getProjectName(budget.assignedProjectId)}}</option>
              </select>


            </td>

            <td>


              <div *ngIf="!this.hidden[booking.id]"> {{getProjectName(booking.assignedProjectId)}}


              </div>
              <select *ngIf="this.hidden[booking.id]" [(ngModel)]="updProjectB" style="width: 150px">
                <option *ngFor="let project of projects" [value]="project.id">{{project.projectName}}</option>
              </select>
            </td>
            <td>

              <div *ngIf="!this.hidden[booking.id]"> {{getBankAccountName(booking.assignedBankAccountId)}}


              </div>
              <select *ngIf="this.hidden[booking.id]" [(ngModel)]="updBankAccountB" style="width: 150px">
                <option *ngFor="let bankAccount of bankAccounts"
                        [value]="bankAccount.id">{{bankAccount.bankAccountName}}</option>
              </select>
            </td>
            <td>

              <button *ngIf="this.hidden[booking.id]" (click)="deleteBookings(booking.id)" class="create" size="small"
                      type="button"
              >Delete Booking
              </button>
              <div></div>

              <button *ngIf="!this.hidden[booking.id]"
                      (click)="updValue=booking.value;updBudgetB=booking.assignedBudgetId;updUserB=booking.assignedUserId;updProjectB=booking.assignedProjectId;updBankAccountB=booking.assignedBankAccountId;this.hidden[booking.id]= !this.hidden[booking.id]"
                      class="create" size="small" type="button"
              > Edit Booking
              </button>


              <button *ngIf="this.hidden[booking.id]"
                      (click)="updateBooking(booking.id);this.hidden[booking.id]= !this.hidden[booking.id]"
                      class="create" size="small" type="button"
              >Submit
              </button>
              <button *ngIf="this.hidden[booking.id]" (click)="this.hidden[booking.id]=!this.hidden[booking.id]">Close
              </button>

            </td>


          </tr>
        </table>
      </div>
    </section>
  </div>
</div>
</body>
<app-footer></app-footer>
</html>
